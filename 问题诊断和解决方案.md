# 问题诊断和解决方案

## 当前问题

**Shortcode `[weh_css_test]` 显示为纯文本，没有被处理**

这说明Shortcode插件可能：
1. 未激活
2. 文件位置不正确
3. 代码有错误

## 解决方案

### 方案1：检查插件是否激活（推荐）

1. 登录WordPress后台
2. 进入 **插件 > 已安装插件**
3. 查找 "Warm Earth Home - CSS Test Area Shortcode"
4. 如果未激活，点击 **启用**
5. 清除缓存
6. 刷新首页查看

### 方案2：直接添加到主题functions.php（更简单）

如果插件方式有问题，可以直接添加到主题的functions.php：

1. 进入 **外观 > 主题文件编辑器**
2. 选择 **functions.php**
3. 在文件末尾添加以下代码：

```php
/**
 * CSS测试区域Shortcode
 * 使用方法: [weh_css_test]
 */
function weh_css_test_area_shortcode($atts) {
    ob_start();
    ?>
    <!-- CSS样式验证测试区域 -->
    <section class="weh-css-test-area" style="padding: 40px 20px; background: #F9F9F9; margin: 40px 0;">
      <div style="max-width: 1200px; margin: 0 auto;">
        <h2 style="text-align: center; margin-bottom: 30px; color: #1a1a1a;">CSS样式验证测试区域</h2>
        
        <!-- 按钮测试 -->
        <div style="margin-bottom: 30px;">
          <h3 style="margin-bottom: 15px; color: #666;">按钮样式测试</h3>
          <button class="wp-element-button is-style-primary" style="margin-right: 10px;">主按钮</button>
          <button class="wp-element-button is-style-secondary">次按钮</button>
        </div>
        
        <!-- 信任提示条测试 -->
        <div style="margin-bottom: 30px;">
          <h3 style="margin-bottom: 15px; color: #666;">信任提示条测试</h3>
          <section class="weh-trust-badge" aria-label="Product guarantees">
            <div class="weh-trust-badge-item">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" style="width: 20px; height: 20px;">
                <path d="M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5z"/>
              </svg>
              <span>支持澳规插头 / RCM认证</span>
            </div>
            <div class="weh-trust-badge-item">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" style="width: 20px; height: 20px;">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
              </svg>
              <span>30天退换 / 适配220-240V</span>
            </div>
          </section>
        </div>
        
        <!-- 参数表格测试 -->
        <div style="margin-bottom: 30px;">
          <h3 style="margin-bottom: 15px; color: #666;">参数表格测试</h3>
          <table class="weh-spec-table">
            <thead>
              <tr>
                <th scope="col">规格项</th>
                <th scope="col">详情</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <th scope="row">尺寸 (Dimensions)</th>
                <td>XX x XX x XX cm</td>
              </tr>
              <tr>
                <th scope="row">材质 (Materials)</th>
                <td>测试材质</td>
              </tr>
              <tr>
                <th scope="row">电压 (Voltage)</th>
                <td>220-240V</td>
              </tr>
              <tr>
                <th scope="row">插头 (Plug)</th>
                <td>AU Plug</td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <!-- 分类卡片测试 -->
        <div style="margin-bottom: 30px;">
          <h3 style="margin-bottom: 15px; color: #666;">分类卡片测试</h3>
          <div class="weh-category-card" style="max-width: 300px; margin: 0 auto;">
            <img src="https://via.placeholder.com/200x200?text=Category" alt="Test category" width="200" height="200" loading="lazy" style="width: 100%; max-width: 200px; height: 200px; object-fit: cover; border-radius: 8px; margin-bottom: 16px; background: #FFFFFF;">
            <h3>测试分类</h3>
            <p>这是分类卡片的测试内容</p>
          </div>
        </div>
        
        <!-- 服务承诺条测试 -->
        <div style="margin-bottom: 30px;">
          <h3 style="margin-bottom: 15px; color: #666;">服务承诺条测试</h3>
          <nav class="weh-trust-bar" aria-label="Service guarantees">
            <span aria-label="Free shipping over $150">Free Shipping Over $150</span>
            <span aria-label="30 day returns">30-Day Returns</span>
            <span aria-label="RCM certified">RCM Certified</span>
            <span aria-label="AU plug ready">AU Plug Ready</span>
          </nav>
        </div>
      </div>
    </section>
    <?php
    return ob_get_clean();
}
add_shortcode('weh_css_test', 'weh_css_test_area_shortcode');
```

4. 点击 **更新文件**
5. 清除缓存
6. 刷新首页查看

### 方案3：使用Code Snippets插件（最安全）

如果不想修改主题文件，可以使用Code Snippets插件：

1. 安装并激活 **Code Snippets** 插件
2. 进入 **代码片段 > 添加新代码片段**
3. 标题：CSS测试区域Shortcode
4. 代码类型：PHP代码片段
5. 粘贴上面的PHP代码
6. 点击 **保存并激活**
7. 清除缓存

## 验证步骤

1. 清除所有缓存（LiteSpeed Cache）
2. 访问首页：`https://warmearthhome.com/`
3. 向下滚动，应该能看到"CSS样式验证测试区域"
4. 检查以下元素：
   - ✅ 按钮样式（主按钮、次按钮）
   - ✅ 信任提示条
   - ✅ 参数表格
   - ✅ 分类卡片
   - ✅ 服务承诺条

## 故障排除

### 如果测试区域仍然不显示：

1. **检查Shortcode是否正确**
   - 进入首页编辑页面
   - 确认Custom HTML区块内容为：`[weh_css_test]`（没有多余的空格或字符）

2. **检查PHP错误**
   - 进入 **工具 > 站点健康**
   - 查看是否有PHP错误

3. **检查主题兼容性**
   - 确认Blocksy主题已更新到最新版本

4. **清除所有缓存**
   - LiteSpeed Cache
   - 浏览器缓存（Ctrl+F5）

---

**建议使用方案2（添加到functions.php）**，这是最简单直接的方法。

